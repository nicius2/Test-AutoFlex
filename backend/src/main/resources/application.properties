# ─── Hibernate ───────────────────────────────────────────────────────────────
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.format-sql=true
quarkus.hibernate-orm.database.generation=none

# ─── Flyway ──────────────────────────────────────────────────────────────────
quarkus.flyway.migrate-at-start=true
quarkus.flyway.repair-at-start=true
quarkus.flyway.baseline-on-migrate=true

# ─── REST ────────────────────────────────────────────────────────────────────
quarkus.http.port=8080

# ─── CORS ────────────────────────────────────────────────────────────────────
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=http://localhost:5173
quarkus.http.cors.methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type
quarkus.http.cors.access-control-allow-credentials=true

# ─── Logs ────────────────────────────────────────────────────────────────────
quarkus.log.level=INFO

# ─── OpenAPI / Swagger UI ────────────────────────────────────────────────────
quarkus.smallrye-openapi.info-title=AutoFlex API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API de controle de estoque de produtos e matérias-primas
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# ═══════════════════════════════════════════════════════════════════════════════
# Perfil DEV — Oracle (docker-compose)
# Pré-requisito: docker compose up -d  (na pasta backend/)
# Credenciais lidas do .env: ORACLE_PASSWORD, ORACLE_PORT
# ═══════════════════════════════════════════════════════════════════════════════
%dev.quarkus.datasource.db-kind=oracle
%dev.quarkus.datasource.jdbc.url=jdbc:oracle:thin:@localhost:${ORACLE_PORT}/XEPDB1
%dev.quarkus.datasource.username=system
%dev.quarkus.datasource.password=${ORACLE_PASSWORD}
%dev.quarkus.flyway.locations=db/migration/oracle

# ═══════════════════════════════════════════════════════════════════════════════
# Perfil PROD — PostgreSQL (Railway)
# Variáveis necessárias no .env (extraídas do DATABASE_PUBLIC_URL do Railway):
#   PGHOST     → gondola.proxy.rlwy.net  (host do TCP Proxy público)
#   PGPORT     → 22712                   (porta do TCP Proxy público)
#   PGDATABASE → railway
#   PGUSER     → postgres
#   PGPASSWORD → <sua senha>
# ═══════════════════════════════════════════════════════════════════════════════
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}?sslmode=require
%prod.quarkus.datasource.username=${PGUSER}
%prod.quarkus.datasource.password=${PGPASSWORD}
%prod.quarkus.flyway.locations=db/migration/postgresql
%prod.quarkus.datasource.jdbc.acquisition-timeout=30

# ═══════════════════════════════════════════════════════════════════════════════
# Perfil CI — PostgreSQL (GitHub Actions service container)
# Variáveis definidas no workflow:
#   DB_URL      → jdbc:postgresql://localhost:5432/autoflex
#   DB_USERNAME → autoflex
#   DB_PASSWORD → autoflex
# ═══════════════════════════════════════════════════════════════════════════════
%ci.quarkus.datasource.db-kind=postgresql
%ci.quarkus.datasource.jdbc.url=${DB_URL}
%ci.quarkus.datasource.username=${DB_USERNAME}
%ci.quarkus.datasource.password=${DB_PASSWORD}
%ci.quarkus.flyway.locations=db/migration/postgresql